{"version":3,"file":"index.js","names":["c","_c","getTranslation","formatFilesize","React","Button","useDocumentDrawer","Pill","ThumbnailComponent","useConfig","useTranslation","baseClass","RelationshipContent","props","$","id","allowEdit","allowRemove","alt","byteSize","className","collectionSlug","displayPreview","filename","mimeType","onRemove","reloadDoc","showCollectionSlug","t0","src","thumbnailSrc","withMeta","t1","x","y","undefined","config","i18n","collectionConfig","collections","find","collection","slug","t2","t3","DocumentDrawer","t4","openDrawer","t5","t6","doc","onSave","generateMetaText","mimeType_0","size","sections","push","join","metaText","previewAllowed","upload","t7","filter","Boolean","_jsxs","children","_jsx","fileSrc","labels","singular","href","target","buttonStyle","icon","iconStyle","onClick"],"sources":["../../../../src/fields/Upload/RelationshipContent/index.tsx"],"sourcesContent":["'use client'\n\nimport type { TypeWithID } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport { formatFilesize } from 'payload/shared'\nimport React from 'react'\n\nimport type { ReloadDoc } from '../types.js'\n\nimport { Button } from '../../../elements/Button/index.js'\nimport { useDocumentDrawer } from '../../../elements/DocumentDrawer/index.js'\nimport { Pill } from '../../../elements/Pill/index.js'\nimport { ThumbnailComponent } from '../../../elements/Thumbnail/index.js'\nimport './index.scss'\nimport { useConfig } from '../../../providers/Config/index.js'\nimport { useTranslation } from '../../../providers/Translation/index.js'\n\nconst baseClass = 'upload-relationship-details'\n\ntype Props = {\n  readonly allowEdit?: boolean\n  readonly allowRemove?: boolean\n  readonly alt: string\n  readonly byteSize: number\n  readonly className?: string\n  readonly collectionSlug: string\n  readonly displayPreview?: boolean\n  readonly filename: string\n  readonly id?: number | string\n  readonly mimeType: string\n  readonly onRemove: () => void\n  readonly reloadDoc: ReloadDoc\n  readonly showCollectionSlug?: boolean\n  readonly src: string\n  readonly thumbnailSrc: string\n  readonly withMeta?: boolean\n  readonly x?: number\n  readonly y?: number\n}\nexport function RelationshipContent(props: Props) {\n  const {\n    id,\n    allowEdit,\n    allowRemove,\n    alt,\n    byteSize,\n    className,\n    collectionSlug,\n    displayPreview,\n    filename,\n    mimeType,\n    onRemove,\n    reloadDoc,\n    showCollectionSlug = false,\n    src,\n    thumbnailSrc,\n    withMeta = true,\n    x,\n    y,\n  } = props\n\n  const { config } = useConfig()\n  const { i18n } = useTranslation()\n  const collectionConfig =\n    'collections' in config\n      ? config.collections.find((collection) => collection.slug === collectionSlug)\n      : undefined\n\n  const [DocumentDrawer, _, { openDrawer }] = useDocumentDrawer({\n    id: src ? id : undefined,\n    collectionSlug,\n  })\n\n  const onSave = React.useCallback(\n    async ({ doc }: { doc: TypeWithID }) => reloadDoc(doc.id, collectionSlug),\n    [reloadDoc, collectionSlug],\n  )\n\n  function generateMetaText(mimeType: string, size: number): string {\n    const sections: string[] = []\n    if (size) {\n      sections.push(formatFilesize(size))\n    }\n\n    if (x && y) {\n      sections.push(`${x}x${y}`)\n    }\n\n    if (mimeType) {\n      sections.push(mimeType)\n    }\n\n    return sections.join(' â€” ')\n  }\n\n  const metaText = withMeta ? generateMetaText(mimeType, byteSize) : ''\n  const previewAllowed = displayPreview ?? collectionConfig?.upload?.displayPreview ?? true\n\n  return (\n    <div className={[baseClass, className].filter(Boolean).join(' ')}>\n      <div className={`${baseClass}__imageAndDetails`}>\n        {previewAllowed && (\n          <ThumbnailComponent\n            alt={alt}\n            className={`${baseClass}__thumbnail`}\n            filename={filename}\n            fileSrc={thumbnailSrc}\n            size=\"small\"\n          />\n        )}\n        {showCollectionSlug && collectionConfig ? (\n          <Pill size=\"small\">{getTranslation(collectionConfig.labels.singular, i18n)}</Pill>\n        ) : null}\n        <div className={`${baseClass}__details`}>\n          <p className={`${baseClass}__filename`}>\n            {src ? (\n              <a href={src} target=\"_blank\">\n                {filename}\n              </a>\n            ) : (\n              filename\n            )}\n          </p>\n          {withMeta ? <p className={`${baseClass}__meta`}>{metaText}</p> : null}\n        </div>\n      </div>\n\n      {allowEdit !== false || allowRemove !== false ? (\n        <div className={`${baseClass}__actions`}>\n          {allowEdit !== false ? (\n            <Button\n              buttonStyle=\"icon-label\"\n              className={`${baseClass}__edit`}\n              icon=\"edit\"\n              iconStyle=\"none\"\n              onClick={openDrawer}\n            />\n          ) : null}\n          {allowRemove !== false ? (\n            <Button\n              buttonStyle=\"icon-label\"\n              className={`${baseClass}__remove`}\n              icon=\"x\"\n              iconStyle=\"none\"\n              onClick={() => onRemove()}\n            />\n          ) : null}\n          <DocumentDrawer onSave={onSave} />\n        </div>\n      ) : null}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}